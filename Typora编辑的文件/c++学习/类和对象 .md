# 类和对象

C++面向对象的三大特性为： ==封装，继承，多态==

C++认为万事万物都有对象，对象上有其属性和行为

例如：

人可以作为对象，属性有姓名，年龄，身高，体重…行为有走,跑,跳,吃饭,唱歌…

车也可以做为对象，属性有轮胎，方向盘，车灯…行为有载人,放音乐…

**具有相同性质的==对象==,我们可以抽象为==类==,人属于人类,车属于车类**

# 封装

## 封装的意义

封装是C++面向对象的三大特性之一

封装的意义

- 将属性和行为作为一个整体,表现生活中的事物
- 将属性和行为加以权限控制

### 封装意义一

在设计类的时候,属性和行为写在一起,表现事物

语法; `class 类名{  访问权限: 属性 / 行为 };`

例如: 设计一个圆类,求圆的周长

```c
// 圆周率
const double PI = 3.14;

```

class 代表设计一个类，类后面紧跟着的就是类名称

```c
class Circle {
    // 访问权限
    // 公共权限
public :
	// 属性 （半径）
	int m_r;
	// 行为  （常用一个函数来表示）
	// 获取圆的周长
	double calculateC() {
		return 2 * PI * m_r;
	}
};

```

具体实现

通过圆类创建具体的园（对象）

```c
Circle c1;

```

给圆对象的属性进行赋值

```c
c1.m_r = 10;

```

计算得出结果

```c
cout << " the circumference of a circle is: " << c1.calculateC() << endl;
//  the circumference of a circle is: 62.8

```

完整实现:

```c
const double PI = 3.14;
// 设计一个园类， 求园的周长
// 园求周长的公式： 2 * PI * 半径

// class 代表设计一个类，类后面紧跟着的就是类名称
class Circle {
    // 访问权限
public :  // （公共权限）
	// 属性 （半径）
	int m_r;
	// 行为
	// 获取圆的周长
	double calculateC() {
		return 2 * PI * m_r;
	}
};
int main() {
	// 通过圆类创建具体的园（对象）
	Circle c1;
	// 给圆对象的属性进行赋值
	c1.m_r = 10;
	cout << " the circumference of a circle is: " << c1.calculateC() << endl;  //  the circumference of a circle is: 62.8
	return 0;
}

```

通过以以一个类创建一个对象的过程称为实例化

```c
// 通过圆类创建具体的园（对象）
	Circle c1;

```

类中的属性和行为 我们统一称为成员

属性  –>成员属性  成员变量

行为  –>成员函数  成员方法

### 封装意义二

类在设计的时候,可以把属性和行为放在不同的权限下,加以控制

访问权限有三种:

- public	公共权限 类内可以访问,类外可以访问
- protected 保护权限 类内可以访问 类外不可以访问
- private 私有权限 类内可以访问 类外不可以访问

```c
class Person {
public :  // 公共权限
    string name;
protected : // 保护权限
    string car;
private :   //私有权限
    int password;

public:
    void  func01() {
        name = "zhangsan";
        car = "aodi";
        password = 123123;
    }
protected :
    void func02() {
        name = "wangwu";
    }
};
int main() {
    Person p1;
    p1.name = "lisi";    // 公共权限内容,在类外可以访问
    //p1.car  = "benchi";   erroe 保护权限内容，在类外访问不到
    //p1.password = 123456;  erroe  私有权限内容，在类外访问不到
    p1.func01();  // 函数同理,保护内容和私有内容在类外不可以调用
    //p1.func02();       保护权限内容，在类外访问不到
    return 0;
}

```

函数同理,保护内容和私有内容在类外不可以调用

# struct 和 class 的区别

在C++中,struct 和 class 唯一的区别就在于默认的访问权限不同

区别:

- struct 默认权限为公共  public
- class 默认权限为私有  private

```c
class C1 {
    int m;   //  默认权限  是私有
};

struct C2 {
    int m;   // 默认权限   是公共
};
int main () {
    C1 c1;
    //c1.m = 10;   //error
    C2 c2;
    c2.m = 10;  // right;
    return 0 ;
}

```

C++中可以直接在结构体中对对象进行初始化

```cpp
// 要修改私有权限的内容
class Person { 
public :
    // 获取姓名
    string getName() {
        return name; 
    }

private :
    string name = "zhangsan";  
}; 
```

私有权限的内容在类外无法访问,但可以通过公共权限的函数获取

```cpp
// 要修改私有权限的内容
class Person { 
public :
    // 获取姓名
    string getName() {
        return name; 
    }
private :
    string name = "zhangsan";  
}; 
int main() {
    Person p; 
    cout << p.getName();   // zhangsan
    return 0; 
}
```

# 静态成员变量

## **静态成员在编译阶段就分配内存**

## **静态成员变量需要在类内定义,在类外初始化**

```cpp
class Person {
public: 
    string name; 
    static int age; 
};  
int Person::age = 20; 

```

## **静态成员变量不属于某个对象,不属于某个对象,所有对象都共享同一份数据**

```cpp
class Person {
public: 
    string name; 
    static int age; 
};  
int Person::age = 20; 
void test01() {
    Person p1; 
    cout << p1.age << endl;  // 20  

    Person p2; 
    p2.age = 30; 
    cout << p1.age << endl;  // 30
}
int main() {
    test01(); 
    return 0; 
}
```

### 因此静态成员变量有两种访问方式

1. 通过对象进行访问

```cpp
    // 通过对象进行访问
    Person p; 
    cout << p.age << endl ;  // 20 
```

1. 通过类名进行访问

```cpp
// 通过类名进行访问
    cout << Person::age << endl;  // 20
```

可以看到,修改p2的age,p1的数据也发生了改变, 说明所有对象都公用同一份数据

## 静态成员变量也只是有访问权限的

```cpp
class Person {
public: 
    string name; 
    static int age;  
private: 
    static int m_B; 
};  
int Person::age = 20;  
int Person::m_B = 30; 
void test02() {
    // 通过类名进行访问
    cout << Person::age << endl;  // 20 
    cout << Person::m_B << endl; // error  无访问权限
}
```

m_B的声明是在私有作用域下,因此在类外无法访问

# 静态成员函数

## 所有对象共享同一个函数

```cpp
class Person {
public: 
    // 静态成员函数
    static void func() {
        cout << "静态成员函数调用" << endl; 
    }
}; 

void test01() { 
    // 通过对象进行访问
    Person p; 
    p.func();  
    // 通过类名进行访问
    Person::func(); 
} 
```

## 静态成员函数只能访问静态成员变量

静态成员函数无法访问非静态成员变量,非静态成员变量属于特定对象,静态成员函数不属于特定对象,无法区分到底是哪个对象的变量; 

```cpp
class Person {
public: 
    // 静态成员函数
    static void func() { 
        m_A = 40;  
        // m_B = 30; //   无法访问非静态成员变量,无法区分到底是哪个对象的m_B; 
        cout << "静态成员函数调用" << endl; 
    } 
    static int m_A; 
    int m_B; 
}; 
int Person::m_A = 30; 
```

静态成员函数也是有访问权限的